<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/c7f848bed9dd25a3-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/css/9b74512675ee6c74.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-c9b793a5deeb135f.js"/><script src="/_next/static/chunks/4bd1b696-aaf09b882924c802.js" async=""></script><script src="/_next/static/chunks/517-1aa39bab3933c6e2.js" async=""></script><script src="/_next/static/chunks/main-app-eb4ba1fd5bb32f2e.js" async=""></script><script src="/_next/static/chunks/596-a24dab9218c0d3e3.js" async=""></script><script src="/_next/static/chunks/app/blog/%5Bslug%5D/page-96b01049ba0390b6.js" async=""></script><meta name="next-size-adjust" content=""/><title>Construindo APIs com Ruby on Rails | Blog de Vinicius Lisboa</title><meta name="description" content="Aprenda a criar APIs RESTful eficientes utilizando Ruby on Rails e boas práticas de desenvolvimento"/><meta property="og:title" content="Construindo APIs com Ruby on Rails"/><meta property="og:description" content="Aprenda a criar APIs RESTful eficientes utilizando Ruby on Rails e boas práticas de desenvolvimento"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2023-09-22"/><meta property="article:author" content="Vinicius Lisboa"/><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Construindo APIs com Ruby on Rails"/><meta name="twitter:description" content="Aprenda a criar APIs RESTful eficientes utilizando Ruby on Rails e boas práticas de desenvolvimento"/><link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="16x16"/><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="__className_d28b19"><section class="py-20 pt-32 bg-white text-black"><div class="container mx-auto px-6"><a class="flex items-center text-green-600 mb-8 font-medium" href="/blog"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path></svg>back_to_blog</a><div style="opacity:0;transform:translateY(20px)"><h1 class="text-4xl md:text-5xl font-black mb-6">Construindo APIs com Ruby on Rails</h1><div class="flex items-center mb-8"><div class="flex items-center mr-6"><div class="w-10 h-10 rounded-full bg-gray-200 mr-3"></div><span class="font-medium">Vinicius Lisboa</span></div><div class="text-gray-500">21/09/2023</div></div><div class="aspect-video bg-gray-200 rounded-xl mb-8 overflow-hidden"><div class="h-full w-full flex items-center justify-center text-gray-400">featured_image</div></div><div class="flex gap-2 mb-8"><span class="px-3 py-1 bg-gray-100 text-sm rounded-full text-gray-600">Ruby</span><span class="px-3 py-1 bg-gray-100 text-sm rounded-full text-gray-600">Rails</span><span class="px-3 py-1 bg-gray-100 text-sm rounded-full text-gray-600">API</span><span class="px-3 py-1 bg-gray-100 text-sm rounded-full text-gray-600">Backend</span></div><article class="prose prose-lg max-w-none"><h1>Construindo APIs com Ruby on Rails</h1>
<p>Ruby on Rails é um framework web robusto e elegante que facilita o desenvolvimento de aplicações web, incluindo APIs RESTful. Neste artigo, vamos explorar como criar APIs eficientes usando Rails.</p>
<h2>Por que Rails para APIs?</h2>
<p>Rails oferece várias vantagens para desenvolvimento de APIs:</p>
<ul>
<li><strong>Convenção sobre configuração</strong>: Menos código boilerplate</li>
<li><strong>Active Record</strong>: ORM poderoso e intuitivo</li>
<li><strong>Roteamento RESTful</strong>: Fácil definição de rotas</li>
<li><strong>Segurança</strong>: Proteções built-in contra ataques comuns</li>
<li><strong>Testes</strong>: Framework de testes robusto</li>
</ul>
<h2>Configurando um projeto Rails API</h2>
<p>Primeiro, vamos criar um novo projeto Rails focado em API:</p>
<pre><code class="language-bash">rails new minha-api --api
cd minha-api
</code></pre>
<p>A flag <code>--api</code> remove componentes desnecessários para APIs, como views e assets.</p>
<h2>Criando um Modelo</h2>
<p>Vamos criar um modelo para artigos:</p>
<pre><code class="language-bash">rails generate model Article title:string content:text author:string published:boolean
rails db:migrate
</code></pre>
<h2>Configurando o Modelo</h2>
<pre><code class="language-ruby"># app/models/article.rb
class Article &lt; ApplicationRecord
  validates :title, presence: true
  validates :content, presence: true
  validates :author, presence: true
  
  scope :published, -&gt; { where(published: true) }
  scope :recent, -&gt; { order(created_at: :desc) }
end
</code></pre>
<h2>Criando o Controller</h2>
<pre><code class="language-bash">rails generate controller Api::V1::Articles
</code></pre>
<pre><code class="language-ruby"># app/controllers/api/v1/articles_controller.rb
class Api::V1::ArticlesController &lt; ApplicationController
  before_action :set_article, only: [:show, :update, :destroy]

  def index
    @articles = Article.published.recent
    render json: @articles
  end

  def show
    render json: @article
  end

  def create
    @article = Article.new(article_params)
    
    if @article.save
      render json: @article, status: :created
    else
      render json: @article.errors, status: :unprocessable_entity
    end
  end

  def update
    if @article.update(article_params)
      render json: @article
    else
      render json: @article.errors, status: :unprocessable_entity
    end
  end

  def destroy
    @article.destroy
    head :no_content
  end

  private

  def set_article
    @article = Article.find(params[:id])
  end

  def article_params
    params.require(:article).permit(:title, :content, :author, :published)
  end
end
</code></pre>
<h2>Configurando as Rotas</h2>
<pre><code class="language-ruby"># config/routes.rb
Rails.application.routes.draw do
  namespace :api do
    namespace :v1 do
      resources :articles
    end
  end
end
</code></pre>
<h2>Serializers para JSON</h2>
<p>Para melhor controle sobre o JSON retornado, use serializers:</p>
<pre><code class="language-bash">gem &#x27;active_model_serializers&#x27;
</code></pre>
<pre><code class="language-ruby"># app/serializers/article_serializer.rb
class ArticleSerializer &lt; ActiveModel::Serializer
  attributes :id, :title, :content, :author, :published, :created_at, :updated_at
  
  def created_at
    object.created_at.strftime(&#x27;%Y-%m-%d %H:%M:%S&#x27;)
  end
  
  def updated_at
    object.updated_at.strftime(&#x27;%Y-%m-%d %H:%M:%S&#x27;)
  end
end
</code></pre>
<h2>Autenticação com JWT</h2>
<p>Para APIs seguras, implemente autenticação JWT:</p>
<pre><code class="language-bash">gem &#x27;jwt&#x27;
gem &#x27;bcrypt&#x27;
</code></pre>
<pre><code class="language-ruby"># app/controllers/application_controller.rb
class ApplicationController &lt; ActionController::API
  before_action :authenticate_request
  
  private
  
  def authenticate_request
    header = request.headers[&#x27;Authorization&#x27;]
    token = header.split(&#x27; &#x27;).last if header
    
    begin
      @decoded = JWT.decode(token, Rails.application.secrets.secret_key_base)[0]
      @current_user = User.find(@decoded[&#x27;user_id&#x27;])
    rescue ActiveRecord::RecordNotFound, JWT::DecodeError
      render json: { error: &#x27;Token inválido&#x27; }, status: :unauthorized
    end
  end
end
</code></pre>
<h2>Testes com RSpec</h2>
<pre><code class="language-ruby"># spec/requests/api/v1/articles_spec.rb
require &#x27;rails_helper&#x27;

RSpec.describe &#x27;Articles API&#x27;, type: :request do
  describe &#x27;GET /api/v1/articles&#x27; do
    it &#x27;returns all articles&#x27; do
      get &#x27;/api/v1/articles&#x27;
      expect(response).to have_http_status(200)
    end
  end

  describe &#x27;POST /api/v1/articles&#x27; do
    it &#x27;creates a new article&#x27; do
      article_params = {
        title: &#x27;Meu Artigo&#x27;,
        content: &#x27;Conteúdo do artigo&#x27;,
        author: &#x27;Vinicius Lisboa&#x27;,
        published: true
      }

      post &#x27;/api/v1/articles&#x27;, params: { article: article_params }
      expect(response).to have_http_status(201)
    end
  end
end
</code></pre>
<h2>Documentação da API</h2>
<p>Use Swagger/OpenAPI para documentar sua API:</p>
<pre><code class="language-bash">gem &#x27;rswag-api&#x27;
gem &#x27;rswag-ui&#x27;
</code></pre>
<h2>Deploy e Monitoramento</h2>
<h3>Deploy no Heroku</h3>
<pre><code class="language-bash">heroku create minha-api
git push heroku main
heroku run rails db:migrate
</code></pre>
<h3>Monitoramento com New Relic</h3>
<pre><code class="language-bash">gem &#x27;newrelic_rpm&#x27;
</code></pre>
<h2>Boas Práticas</h2>
<ol>
<li><strong>Versionamento</strong>: Sempre versione suas APIs</li>
<li><strong>Validação</strong>: Valide dados de entrada</li>
<li><strong>Tratamento de Erros</strong>: Retorne códigos HTTP apropriados</li>
<li><strong>Rate Limiting</strong>: Implemente limites de requisições</li>
<li><strong>Caching</strong>: Use cache para melhorar performance</li>
<li><strong>Logs</strong>: Mantenha logs detalhados</li>
<li><strong>Testes</strong>: Teste todas as funcionalidades</li>
</ol>
<h2>Exemplo de Rate Limiting</h2>
<pre><code class="language-ruby"># config/application.rb
config.middleware.use Rack::Attack

# config/initializers/rack_attack.rb
class Rack::Attack
  throttle(&#x27;api/ip&#x27;, limit: 100, period: 1.minute) do |req|
    req.ip
  end
end
</code></pre>
<h2>Conclusão</h2>
<p>Ruby on Rails é uma excelente escolha para desenvolvimento de APIs. Com suas convenções, ferramentas built-in e ecossistema rico, você pode criar APIs robustas e escaláveis rapidamente.</p>
<p>Lembre-se de seguir as boas práticas, implementar testes adequados e manter a documentação atualizada. A comunidade Rails é muito ativa e sempre há algo novo para aprender!</p>
<hr/>
<p><em>Este artigo foi escrito por Vinicius Lisboa. Para mais conteúdo sobre desenvolvimento backend, siga-me nas redes sociais.</em></p></article><div class="border-t border-gray-200 mt-12 pt-8"><h3 class="text-2xl font-bold mb-6">share_post</h3><div class="flex gap-4"><button class="p-3 bg-gray-100 rounded-full hover:bg-gray-200 transition-colors"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84"></path></svg></button><button class="p-3 bg-gray-100 rounded-full hover:bg-gray-200 transition-colors"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z" clip-rule="evenodd"></path></svg></button><button class="p-3 bg-gray-100 rounded-full hover:bg-gray-200 transition-colors"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path d="M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"></path></svg></button><button class="p-3 bg-gray-100 rounded-full hover:bg-gray-200 transition-colors"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z" clip-rule="evenodd"></path></svg></button></div></div></div></div></section><script src="/_next/static/chunks/webpack-c9b793a5deeb135f.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[5244,[],\"\"]\n3:I[3866,[],\"\"]\n5:I[6213,[],\"OutletBoundary\"]\n7:I[6213,[],\"MetadataBoundary\"]\n9:I[6213,[],\"ViewportBoundary\"]\nb:I[4835,[],\"\"]\n:HL[\"/_next/static/media/c7f848bed9dd25a3-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/css/9b74512675ee6c74.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"DvCRqxrcZEzaBm-vQxvoe\",\"p\":\"\",\"c\":[\"\",\"blog\",\"construindo-apis-com-ruby-on-rails\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"blog\",{\"children\":[[\"slug\",\"construindo-apis-com-ruby-on-rails\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/9b74512675ee6c74.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"className\":\"__className_d28b19\",\"children\":[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[],[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]}]]}],{\"children\":[\"blog\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"slug\",\"construindo-apis-com-ruby-on-rails\",\"d\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\",\"$0:f:0:1:2:children:2:children:0\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[\"$L4\",null,[\"$\",\"$L5\",null,{\"children\":\"$L6\"}]]}],{},null,false]},null,false]},null,false]},null,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$1\",\"oSivx4GduJWDD76QijbNA\",{\"children\":[[\"$\",\"$L7\",null,{\"children\":\"$L8\"}],[\"$\",\"$L9\",null,{\"children\":\"$La\"}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]]}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$b\",\"$undefined\"],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"c:I[3818,[\"596\",\"static/chunks/596-a24dab9218c0d3e3.js\",\"953\",\"static/chunks/app/blog/%5Bslug%5D/page-96b01049ba0390b6.js\"],\"default\"]\n"])</script><script>self.__next_f.push([1,"4:[\"$\",\"$Lc\",null,{\"post\":{\"meta\":{\"slug\":\"construindo-apis-com-ruby-on-rails\",\"title\":\"Construindo APIs com Ruby on Rails\",\"excerpt\":\"Aprenda a criar APIs RESTful eficientes utilizando Ruby on Rails e boas práticas de desenvolvimento\",\"date\":\"2023-09-22\",\"imageUrl\":\"/images/blog/rails-api.jpg\",\"tags\":[\"Ruby\",\"Rails\",\"API\",\"Backend\"],\"author\":{\"name\":\"Vinicius Lisboa\",\"imageUrl\":\"/images/vinicius.jpeg\"}},\"content\":[[\"$\",\"h1\",null,{\"children\":\"Construindo APIs com Ruby on Rails\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Ruby on Rails é um framework web robusto e elegante que facilita o desenvolvimento de aplicações web, incluindo APIs RESTful. Neste artigo, vamos explorar como criar APIs eficientes usando Rails.\"}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Por que Rails para APIs?\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Rails oferece várias vantagens para desenvolvimento de APIs:\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Convenção sobre configuração\"}],\": Menos código boilerplate\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Active Record\"}],\": ORM poderoso e intuitivo\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Roteamento RESTful\"}],\": Fácil definição de rotas\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Segurança\"}],\": Proteções built-in contra ataques comuns\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Testes\"}],\": Framework de testes robusto\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Configurando um projeto Rails API\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Primeiro, vamos criar um novo projeto Rails focado em API:\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-bash\",\"children\":\"rails new minha-api --api\\ncd minha-api\\n\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"A flag \",[\"$\",\"code\",null,{\"children\":\"--api\"}],\" remove componentes desnecessários para APIs, como views e assets.\"]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Criando um Modelo\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Vamos criar um modelo para artigos:\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-bash\",\"children\":\"rails generate model Article title:string content:text author:string published:boolean\\nrails db:migrate\\n\"}]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Configurando o Modelo\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-ruby\",\"children\":\"# app/models/article.rb\\nclass Article \u003c ApplicationRecord\\n  validates :title, presence: true\\n  validates :content, presence: true\\n  validates :author, presence: true\\n  \\n  scope :published, -\u003e { where(published: true) }\\n  scope :recent, -\u003e { order(created_at: :desc) }\\nend\\n\"}]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Criando o Controller\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-bash\",\"children\":\"rails generate controller Api::V1::Articles\\n\"}]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-ruby\",\"children\":\"# app/controllers/api/v1/articles_controller.rb\\nclass Api::V1::ArticlesController \u003c ApplicationController\\n  before_action :set_article, only: [:show, :update, :destroy]\\n\\n  def index\\n    @articles = Article.published.recent\\n    render json: @articles\\n  end\\n\\n  def show\\n    render json: @article\\n  end\\n\\n  def create\\n    @article = Article.new(article_params)\\n    \\n    if @article.save\\n      render json: @article, status: :created\\n    else\\n      render json: @article.errors, status: :unprocessable_entity\\n    end\\n  end\\n\\n  def update\\n    if @article.update(article_params)\\n      render json: @article\\n    else\\n      render json: @article.errors, status: :unprocessable_entity\\n    end\\n  end\\n\\n  def destroy\\n    @article.destroy\\n    head :no_content\\n  end\\n\\n  private\\n\\n  def set_article\\n    @article = Article.find(params[:id])\\n  end\\n\\n  def article_params\\n    params.require(:article).permit(:title, :content, :author, :published)\\n  end\\nend\\n\"}]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Configurando as Rotas\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-ruby\",\"children\":\"# config/routes.rb\\nRails.application.routes.draw do\\n  namespace :api do\\n    namespace :v1 do\\n      resources :articles\\n    end\\n  end\\nend\\n\"}]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Serializers para JSON\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Para melhor controle sobre o JSON retornado, use serializers:\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-bash\",\"children\":\"gem 'active_model_serializers'\\n\"}]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-ruby\",\"children\":\"# app/serializers/article_serializer.rb\\nclass ArticleSerializer \u003c ActiveModel::Serializer\\n  attributes :id, :title, :content, :author, :published, :created_at, :updated_at\\n  \\n  def created_at\\n    object.created_at.strftime('%Y-%m-%d %H:%M:%S')\\n  end\\n  \\n  def updated_at\\n    object.updated_at.strftime('%Y-%m-%d %H:%M:%S')\\n  end\\nend\\n\"}]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Autenticação com JWT\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Para APIs seguras, implemente autenticação JWT:\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-bash\",\"children\":\"gem 'jwt'\\ngem 'bcrypt'\\n\"}]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-ruby\",\"children\":\"# app/controllers/application_controller.rb\\nclass ApplicationController \u003c ActionController::API\\n  before_action :authenticate_request\\n  \\n  private\\n  \\n  def authenticate_request\\n    header = request.headers['Authorization']\\n    token = header.split(' ').last if header\\n    \\n    begin\\n      @decoded = JWT.decode(token, Rails.application.secrets.secret_key_base)[0]\\n      @current_user = User.find(@decoded['user_id'])\\n    rescue ActiveRecord::RecordNotFound, JWT::DecodeError\\n      render json: { error: 'Token inválido' }, status: :unauthorized\\n    end\\n  end\\nend\\n\"}]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Testes com RSpec\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-ruby\",\"children\":\"# spec/requests/api/v1/articles_spec.rb\\nrequire 'rails_helper'\\n\\nRSpec.describe 'Articles API', type: :request do\\n  describe 'GET /api/v1/articles' do\\n    it 'returns all articles' do\\n      get '/api/v1/articles'\\n      expect(response).to have_http_status(200)\\n    end\\n  end\\n\\n  describe 'POST /api/v1/articles' do\\n    it 'creates a new article' do\\n      article_params = {\\n        title: 'Meu Artigo',\\n        content: 'Conteúdo do artigo',\\n        author: 'Vinicius Lisboa',\\n        published: true\\n      }\\n\\n      post '/api/v1/articles', params: { article: article_params }\\n      expect(response).to have_http_status(201)\\n    end\\n  end\\nend\\n\"}]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Documentação da API\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Use Swagger/OpenAPI para documentar sua API:\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-bash\",\"children\":\"gem 'rswag-api'\\ngem 'rswag-ui'\\n\"}]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Deploy e Monitoramento\"}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"Deploy no Heroku\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-bash\",\"children\":\"heroku create minha-api\\ngit push heroku main\\nheroku run rails db:migrate\\n\"}]}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"Monitoramento com New Relic\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-bash\",\"children\":\"gem 'newrelic_rpm'\\n\"}]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Boas Práticas\"}],\"\\n\",[\"$\",\"ol\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Versionamento\"}],\": Sempre versione suas APIs\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Validação\"}],\": Valide dados de entrada\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Tratamento de Erros\"}],\": Retorne códigos HTTP apropriados\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Rate Limiting\"}],\": Implemente limites de requisições\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Caching\"}],\": Use cache para melhorar performance\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Logs\"}],\": Mantenha logs detalhados\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Testes\"}],\": Teste todas as funcionalidades\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Exemplo de Rate Limiting\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-ruby\",\"children\":\"# config/application.rb\\nconfig.middleware.use Rack::Attack\\n\\n# config/initializers/rack_attack.rb\\nclass Rack::Attack\\n  throttle('api/ip', limit: 100, period: 1.minute) do |req|\\n    req.ip\\n  end\\nend\\n\"}]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Conclusão\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Ruby on Rails é uma excelente escolha para desenvolvimento de APIs. Com suas convenções, ferramentas built-in e ecossistema rico, você pode criar APIs robustas e escaláveis rapidamente.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Lembre-se de seguir as boas práticas, implementar testes adequados e manter a documentação atualizada. A comunidade Rails é muito ativa e sempre há algo novo para aprender!\"}],\"\\n\",[\"$\",\"hr\",null,{}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"Este artigo foi escrito por Vinicius Lisboa. Para mais conteúdo sobre desenvolvimento backend, siga-me nas redes sociais.\"}]}]]}}]\n"])</script><script>self.__next_f.push([1,"a:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n"])</script><script>self.__next_f.push([1,"8:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"1\",{\"children\":\"Construindo APIs com Ruby on Rails | Blog de Vinicius Lisboa\"}],[\"$\",\"meta\",\"2\",{\"name\":\"description\",\"content\":\"Aprenda a criar APIs RESTful eficientes utilizando Ruby on Rails e boas práticas de desenvolvimento\"}],[\"$\",\"meta\",\"3\",{\"property\":\"og:title\",\"content\":\"Construindo APIs com Ruby on Rails\"}],[\"$\",\"meta\",\"4\",{\"property\":\"og:description\",\"content\":\"Aprenda a criar APIs RESTful eficientes utilizando Ruby on Rails e boas práticas de desenvolvimento\"}],[\"$\",\"meta\",\"5\",{\"property\":\"og:type\",\"content\":\"article\"}],[\"$\",\"meta\",\"6\",{\"property\":\"article:published_time\",\"content\":\"2023-09-22\"}],[\"$\",\"meta\",\"7\",{\"property\":\"article:author\",\"content\":\"Vinicius Lisboa\"}],[\"$\",\"meta\",\"8\",{\"name\":\"twitter:card\",\"content\":\"summary\"}],[\"$\",\"meta\",\"9\",{\"name\":\"twitter:title\",\"content\":\"Construindo APIs com Ruby on Rails\"}],[\"$\",\"meta\",\"10\",{\"name\":\"twitter:description\",\"content\":\"Aprenda a criar APIs RESTful eficientes utilizando Ruby on Rails e boas práticas de desenvolvimento\"}],[\"$\",\"link\",\"11\",{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"16x16\"}]]\n"])</script><script>self.__next_f.push([1,"6:null\n"])</script></body></html>