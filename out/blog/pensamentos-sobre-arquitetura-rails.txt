1:"$Sreact.fragment"
2:I[3704,["177","static/chunks/app/layout-fc61d8c659479b00.js"],""]
3:I[5244,[],""]
4:I[3866,[],""]
6:I[6213,[],"OutletBoundary"]
8:I[6213,[],"MetadataBoundary"]
a:I[6213,[],"ViewportBoundary"]
c:I[4835,[],""]
:HL["/_next/static/media/7b0b24f36b1a6d0b-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/css/de7f2779e490a4a1.css","style"]
0:{"P":null,"b":"01j8z3b5V7eG4rVAp1alJ","p":"","c":["","blog","pensamentos-sobre-arquitetura-rails"],"i":false,"f":[[["",{"children":["blog",{"children":[["slug","pensamentos-sobre-arquitetura-rails","d"],{"children":["__PAGE__",{}]}]}]},"$undefined","$undefined",true],["",["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/de7f2779e490a4a1.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","html",null,{"lang":"en","children":[["$","head",null,{"children":[["$","$L2",null,{"src":"https://www.googletagmanager.com/gtag/js?id=G-QY2VMWMXL2","strategy":"beforeInteractive"}],["$","$L2",null,{"id":"google-analytics","strategy":"beforeInteractive","children":"\n            window.dataLayer = window.dataLayer || [];\n            function gtag(){dataLayer.push(arguments);}\n            gtag('js', new Date());\n            gtag('config', 'G-QY2VMWMXL2');\n          "}]]}],["$","body",null,{"className":"__className_ed3508","children":["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[[],[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":404}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]]],"forbidden":"$undefined","unauthorized":"$undefined"}]}]]}]]}],{"children":["blog",["$","$1","c",{"children":[null,["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":[["slug","pensamentos-sobre-arquitetura-rails","d"],["$","$1","c",{"children":[null,["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children","$0:f:0:1:2:children:2:children:0","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":["__PAGE__",["$","$1","c",{"children":["$L5",null,["$","$L6",null,{"children":"$L7"}]]}],{},null,false]},null,false]},null,false]},null,false],["$","$1","h",{"children":[null,["$","$1","7rnQCJJALv109_W8CSEJW",{"children":[["$","$L8",null,{"children":"$L9"}],["$","$La",null,{"children":"$Lb"}],["$","meta",null,{"name":"next-size-adjust","content":""}]]}]]}],false]],"m":"$undefined","G":["$c","$undefined"],"s":false,"S":true}
d:I[3818,["208","static/chunks/208-673db12e6e83b7c3.js","953","static/chunks/app/blog/%5Bslug%5D/page-a981c80a3cf7b169.js"],"default"]
e:I[7970,["208","static/chunks/208-673db12e6e83b7c3.js","953","static/chunks/app/blog/%5Bslug%5D/page-a981c80a3cf7b169.js"],"Image"]
5:["$","$Ld",null,{"post":{"meta":{"slug":"pensamentos-sobre-arquitetura-rails","title":"Pensamentos sobre arquitetura do Rails","excerpt":"","date":"2025-12-09","imageUrl":"/images/blog/arquitetura-rails.png","tags":["Ruby","Rails","DDD","ActiveRecord","Arquitetura"],"author":{"name":"Vinicius Lisboa","imageUrl":"/images/vinicius.jpeg"}},"content":[["$","p",null,{"className":"text-gray-700 leading-relaxed mb-4","children":"Li recentemente um texto muito interessante do Daniel Frydman (aliás, um ótimo blog que tenho gostado muito de acompanhar e tem me inspirado a escrever mais.) onde ele aplica os conceitos de arquitetura hexagonal a um projeto Rails. Acredito que a aplicação proposta é uma ótima maneira de enxergar o problema e tem benefícios claros como ele mesmo demonstra em seu texto."}],"\n",["$","p",null,{"className":"text-gray-700 leading-relaxed mb-4","children":["No entanto esse assunto me deixou com uma pulga atrás da orelha, e eu gostaria de externalizar isso neste texto onde eu pretendo tentar entender os conceitos de arquitetura hexagonal como proposto por Alistair Cockburn e como isso \"conflita\" com alguns dos pensamentos por trás do conhecido ",["$","em",null,{"className":"italic text-gray-700","children":"Rails Way"}],"."]}],"\n",["$","p",null,{"className":"text-gray-700 leading-relaxed mb-4","children":"As ideias (ou pelo menos sua difusão) de Cockburn com Hexagonal, Bob Martin com Clean Arch, Eric Evans com DDD parecem partir de um ponto em comum: o domínio da sua aplicação, isto é aquilo que chamamos de lógica de negócio, deve estar isolada das outras camadas camadas da aplicação."}],"\n",["$","p",null,{"className":"text-gray-700 leading-relaxed mb-4","children":["Cockburn especificamente propõe que o domínio deve ser isolada da ",["$","em",null,{"className":"italic text-gray-700","children":"infraestrutura"}],": a lógica de negócio fica no “núcleo”, conectando-se ao mundo externo apenas através de “portas” e “adaptadores”. O núcleo não sabe se está conversando com uma interface gráfica, HTTP ou um banco de dados, tudo isso é abstraído via contratos claros de entrada e saída (os ja mencionados ",["$","em",null,{"className":"italic text-gray-700","children":"ports/adapters"}],"), permitindo fácil troca, adaptação e, principalmente, a ",["$","em",null,{"className":"italic text-gray-700","children":"testabilidade independente do ambiente externo"}],".",["$","a",null,{"className":"text-green-600 hover:text-green-700 hover:underline transition-colors","href":"https://blog.everestek.com/a-deep-dive-into-hexagonal-architecture-principles-and-practices-2/"}]]}],"\n",["$","p",null,{"className":"text-gray-700 leading-relaxed mb-4","children":["$","div",null,{"className":"my-8 flex justify-center","children":["$","$Le",null,{"src":"/images/blog/hexFig4.png","alt":"Image description","width":600,"height":300,"className":"rounded-lg shadow-lg max-w-2xl w-full h-auto"}]}]}],"\n",["$","p",null,{"className":"text-gray-700 leading-relaxed mb-4","children":["O Rails no entanto segue por um outro caminho, e o cerne da questão parece pra mim ao menos, repousar sobre o ",["$","em",null,{"className":"italic text-gray-700","children":"ActiveRecord"}],". Martin Fowler define active record em ",["$","em",null,{"className":"italic text-gray-700","children":"Patterns of Enterprise Application Architecture"}]," como:"]}],"\n",["$","blockquote",null,{"className":"border-l-4 border-green-500 pl-4 italic text-gray-600 mb-6","children":["\n",["$","p",null,{"className":"text-gray-700 leading-relaxed mb-4","children":"An object that wraps a row in a database table or view, encapsulates the database access, and adds domain logic on that data."}],"\n"]}],"\n",["$","p",null,{"className":"text-gray-700 leading-relaxed mb-4","children":["$","div",null,{"className":"my-8 flex justify-center","children":["$","$Le",null,{"src":"/images/blog/active-record.png","alt":"Image description","width":600,"height":300,"className":"rounded-lg shadow-lg max-w-2xl w-full h-auto"}]}]}],"\n",["$","p",null,{"className":"text-gray-700 leading-relaxed mb-4","children":["Num primeiro momento essa ideia parece estranha. Coisas diferentes parecem melhores se mantidas separadas, cada uma com suas responsabilidades. Por que juntar comportamento de domínio com persistência? Por que um objeto que “representa” uma entidade do negócio deveria também saber como se salvar no banco? Parece uma violação obvia do isolamento de dominio. E de fato isso, como DHH aponta em seus textos, virou quase uma espécie de ",["$","em",null,{"className":"italic text-gray-700","children":"dogma arquitetural"}],"."]}],"\n",["$","p",null,{"className":"text-gray-700 leading-relaxed mb-4","children":["No entanto ao voltarmos a luz da orientação a objetos para o problema parece que as coisas começam a se encaixar. A ideia de ",["$","em",null,{"className":"italic text-gray-700","children":"encapsulação"}]," defendida por autores como Alan Kay (criador do termo OO) e Kent Beck (com o SmallTalk) propoe que objetos devem ter controle seus proprios ",["$","em",null,{"className":"italic text-gray-700","children":"estados"}]," e ",["$","em",null,{"className":"italic text-gray-700","children":"comportamentos"}],", assim como no active record. E a separação estrita e mal aplicada dessa dessas duas camadas pode gerar aquilo que o Fowler chamou de ",["$","a",null,{"className":"text-green-600 hover:text-green-700 hover:underline transition-colors","href":"https://martinfowler.com/bliki/AnemicDomainModel.html","children":"Anemic Domain Model"}],", modelos que são meramente conjuntos de dados, sem nenhuma lógica (justamente o que o DDD quer solucionar, ironicamente)."]}],"\n",["$","p",null,{"className":"text-gray-700 leading-relaxed mb-4","children":"Todo esse problema reside no fato de que nosso banco de dados e nossa aplicação são coisas diferentes que precisam se comunicar. Que precisam encontrar um meio de transportar informação. O active record, diferentemente de muitos ORM's, se importa com ambas as partes, foi desenhado para que a camada de dominio e a persistencia dos dados fiquem juntas."}],"\n",["$","blockquote",null,{"className":"border-l-4 border-green-500 pl-4 italic text-gray-600 mb-6","children":["\n",["$","p",null,{"className":"text-gray-700 leading-relaxed mb-4","children":["In a database-powered application, domain logic is indissolubly linked to persistence. Is isolating persistence a goal or mitigation against not having the right ORM (Object Relational Mapping) technology in place? My point of view is that ",["$","em",null,{"className":"italic text-gray-700","children":"if"}]," the ORM perfectly blends with the host language, and ",["$","em",null,{"className":"italic text-gray-700","children":"if"}]," it comes with good answers for persisting your object models, and ",["$","em",null,{"className":"italic text-gray-700","children":"if"}]," it offers good encapsulation mechanisms, then the original question gets restated. Instead of ",["$","em",null,{"className":"italic text-gray-700","children":"“how can I isolate persistence from domain logic”"}],", it becomes ",["$","em",null,{"className":"italic text-gray-700","children":"“why would I”"}],"?"]}],"\n"]}],"\n",["$","p",null,{"className":"text-gray-700 leading-relaxed mb-4","children":"Referencias:"}],"\n",["$","p",null,{"className":"text-gray-700 leading-relaxed mb-4","children":["$","a",null,{"className":"text-green-600 hover:text-green-700 hover:underline transition-colors","href":"https://danonrails.wordpress.com/2025/10/14/hexagonal-architecture-in-rails-set-your-business-logic-free/","children":"https://danonrails.wordpress.com/2025/10/14/hexagonal-architecture-in-rails-set-your-business-logic-free/"}]}],"\n",["$","p",null,{"className":"text-gray-700 leading-relaxed mb-4","children":["$","a",null,{"className":"text-green-600 hover:text-green-700 hover:underline transition-colors","href":"https://www.martinfowler.com/eaaCatalog/activeRecord.html","children":"https://www.martinfowler.com/eaaCatalog/activeRecord.html"}]}],"\n",["$","p",null,{"className":"text-gray-700 leading-relaxed mb-4","children":["$","a",null,{"className":"text-green-600 hover:text-green-700 hover:underline transition-colors","href":"https://martinfowler.com/articles/badri-hexagonal/","children":"https://martinfowler.com/articles/badri-hexagonal/"}]}],"\n",["$","p",null,{"className":"text-gray-700 leading-relaxed mb-4","children":["$","a",null,{"className":"text-green-600 hover:text-green-700 hover:underline transition-colors","href":"https://dev.37signals.com/active-record-nice-and-blended/","children":"https://dev.37signals.com/active-record-nice-and-blended/"}]}],"\n",["$","p",null,{"className":"text-gray-700 leading-relaxed mb-4","children":["$","a",null,{"className":"text-green-600 hover:text-green-700 hover:underline transition-colors","href":"https://dev.37signals.com/vanilla-rails-is-plenty/","children":"https://dev.37signals.com/vanilla-rails-is-plenty/"}]}],"\n",["$","p",null,{"className":"text-gray-700 leading-relaxed mb-4","children":["$","a",null,{"className":"text-green-600 hover:text-green-700 hover:underline transition-colors","href":"https://martinfowler.com/bliki/AnemicDomainModel.html","children":"https://martinfowler.com/bliki/AnemicDomainModel.html"}]}]]}}]
b:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}]]
9:[["$","meta","0",{"charSet":"utf-8"}],["$","title","1",{"children":"Pensamentos sobre arquitetura do Rails | Blog de Vinicius Lisboa"}],["$","link","2",{"rel":"manifest","href":"/manifest.webmanifest","crossOrigin":"$undefined"}],["$","meta","3",{"name":"robots","content":"index, follow"}],["$","meta","4",{"property":"og:title","content":"Pensamentos sobre arquitetura do Rails"}],["$","meta","5",{"property":"og:url","content":"https://viniciuslisboa07.github.io/blog/pensamentos-sobre-arquitetura-rails"}],["$","meta","6",{"property":"og:site_name","content":"Blog de Vinicius Lisboa"}],["$","meta","7",{"property":"og:image","content":"http://localhost:3000/images/blog/arquitetura-rails.png"}],["$","meta","8",{"property":"og:image:width","content":"1200"}],["$","meta","9",{"property":"og:image:height","content":"630"}],["$","meta","10",{"property":"og:image:alt","content":"Pensamentos sobre arquitetura do Rails"}],["$","meta","11",{"property":"og:type","content":"article"}],["$","meta","12",{"property":"article:published_time","content":"2025-12-09"}],["$","meta","13",{"property":"article:author","content":"Vinicius Lisboa"}],["$","meta","14",{"name":"twitter:card","content":"summary_large_image"}],["$","meta","15",{"name":"twitter:title","content":"Pensamentos sobre arquitetura do Rails"}],["$","meta","16",{"name":"twitter:image","content":"http://localhost:3000/images/blog/arquitetura-rails.png"}],["$","link","17",{"rel":"icon","href":"/favicon.ico","type":"image/x-icon","sizes":"16x16"}],["$","link","18",{"rel":"icon","href":"/icon?eacec83176f30837","alt":"$undefined","type":"image/png","sizes":"32x32"}]]
7:null
